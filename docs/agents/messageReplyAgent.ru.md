# Агент ответа на сообщение

Данный агент генерирует ответное сообщение, связанное с исходным сообщением с помощью отношения "nrel_reply".

**Класс действий:**

`action_reply_to_message`


**Параметры:**

1. `linkAddr` -- sc-ссылка с текстом сообщения пользователя;
2. `dialogAddr` -- узел диалога, элемент класса `concept_dialogue`.

Также должен быть `author` для узла действия.

**Ход работы агента:**

* Агент генерирует узел сообщения в базе знаний, идентифицирующий автора действия как автора сообщения, а полученный текстовый файл - как текст этого сообщения;
* Затем генерируется необходимая конструкция для вызова агента интерпретации неатомарного действия. Пример этой конструкции показан ниже.

<img src="../images/messageReplyAgentGener.png"></img>

* Агент ожидает, когда агент интерпретации не завершит свою работу. Затем выполняет поиск ответного сообщения, которое должно было быть сгенерировано во время работы агента интерпретации, и добавляет его к ответной структуре.

### Пример

Пример входной структуры:

<img src="../images/messageReplyAgentInput.png"></img>

Пример выходной структуры:

<img src="../images/messageReplyAgentOutput.png"></img>

### Результат

Возможные результаты:
 
* `SC_RESULT_OK` - ответное сообщение сгенерировано;
* `SC_RESULT_ERROR`- внутренняя ошибка.
